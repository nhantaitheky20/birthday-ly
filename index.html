<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday üíñ</title>

<style>
body {
    margin: 0;
    background: linear-gradient(45deg, #ff9a9e, #fad0c4);
    overflow: hidden;
    font-family: Arial, sans-serif;
    text-align: center;
}

/* Layout card cƒÉn gi·ªØa */
.card {
    min-height: 100vh;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

img {
    width: 60vw;
    max-width: 220px;
    border-radius: 20px;
    box-shadow: 0 0 20px rgba(255,255,255,0.8);
    margin-bottom: 10px;
}

h1 {
    color: white;
    text-shadow: 0 0 10px red;
    margin-bottom: 10px;
}

#text {
    color: white;
    font-size: 18px;
    margin: 20px;
    min-height: 140px;
    white-space: pre-line;
    max-width: 90vw;
}

/* Tim bay n·ªÅn */
@keyframes fly {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(-800px); opacity: 0; }
}

/* Tim nh·ªè theo k√Ω t·ª± */
@keyframes miniFly {
    from {
        transform: translate(0,0) scale(1) rotate(45deg);
        opacity: 1;
    }
    to {
        transform: translate(-10px,-50px) scale(1.8) rotate(45deg);
        opacity: 0;
    }
}

@media (max-width: 480px) {
    h1 { font-size: 24px; }
    #text { font-size: 17px; }
}
</style>
</head>

<body>

<!-- üéµ NH·∫†C -->
<audio id="bgm" loop playsinline>
  <source src="happy.mp3" type="audio/mpeg">
</audio>

<div class="card">
    <h1>üíñ Happy Birthday üíñ</h1>
    <img src="ly.jpeg" alt="Ly">
    <div id="text"></div>
</div>

<script>
// ====== B·∫¨T NH·∫†C KHI CH·∫†M ======
let musicStarted = false;
function startMusic() {
    if (musicStarted) return;
    const audio = document.getElementById("bgm");
    if (!audio) return;
    audio.muted = false;
    audio.play().then(() => musicStarted = true).catch(() => {});
}
document.body.addEventListener("touchstart", startMusic, { once: true });
document.body.addEventListener("click", startMusic, { once: true });

// ====== L·ªúI CH√öC ======
const message = `
H√¥m nay l√† m·ªôt ng√†y th·∫≠t ƒë·∫∑c bi·ªát...
V√¨ ƒë√≥ l√† ng√†y c·∫≠u xu·∫•t hi·ªán tr√™n th·∫ø gi·ªõi n√†y üíñ

Ch√∫c c·∫≠u lu√¥n vui v·∫ª,
lu√¥n c∆∞·ªùi th·∫≠t nhi·ªÅu,
lu√¥n h·∫°nh ph√∫c v√† ƒë∆∞·ª£c y√™u th∆∞∆°ng th·∫≠t nhi·ªÅu nh√© ü•∞

C·∫£m ∆°n c·∫≠u v√¨ ƒë√£ xu·∫•t hi·ªán trong cu·ªôc ƒë·ªùi n√†y.
`;

let i = 0;
const speed = 45;

// ====== M√ÄU NG·∫™U NHI√äN ======
function randomColor() {
    const colors = ["#ff0055", "#ff66cc", "#ff0000", "#ff99cc", "#ff3366", "#ff3399", "#ff77aa"];
    return colors[Math.floor(Math.random() * colors.length)];
}

// ====== T·∫†O TIM CSS ======
function createHeart(x, y) {
    const heart = document.createElement("div");
    heart.style.position = "fixed";
    heart.style.left = x + "px";
    heart.style.top = y + "px";
    heart.style.width = "14px";
    heart.style.height = "14px";
    heart.style.transform = "rotate(45deg)";
    heart.style.background = randomColor();
    heart.style.animation = "miniFly 1.2s ease-out forwards";
    heart.style.zIndex = 9999;
    heart.style.pointerEvents = "none";

    heart.innerHTML = `
        <div style="position:absolute;width:14px;height:14px;background:inherit;border-radius:50%;top:-7px;left:0;"></div>
        <div style="position:absolute;width:14px;height:14px;background:inherit;border-radius:50%;left:-7px;top:0;"></div>
    `;

    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 1200);
}

// ====== HI·ªÜU ·ª®NG G√ï CH·ªÆ + TIM ======
function typeWriter() {
    if (i < message.length) {
        const textEl = document.getElementById("text");

        const span = document.createElement("span");
        span.textContent = message.charAt(i);
        textEl.appendChild(span);

        const rects = span.getClientRects();
        if (rects.length > 0 && message.charAt(i).trim() !== "") {
            const r = rects[0];
            createHeart(r.left + r.width / 2, r.top + r.height / 2);
        }

        i++;
        setTimeout(typeWriter, speed);
    }
}

typeWriter();

// ====== TIM BAY N·ªÄN ======
function createBgHeart() {
    const heart = document.createElement("div");
    heart.innerHTML = "üíñ";
    heart.style.position = "fixed";
    heart.style.left = Math.random() * window.innerWidth + "px";
    heart.style.bottom = "0px";
    heart.style.fontSize = (20 + Math.random() * 30) + "px";
    heart.style.animation = "fly 4s linear forwards";
    heart.style.pointerEvents = "none";
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 4000);
}
setInterval(createBgHeart, 700);
</script>

</body>
</html>
